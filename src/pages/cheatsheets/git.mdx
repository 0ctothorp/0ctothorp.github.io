---
layout: '../../layouts/Article.astro'
---

# git cheatsheet

## Worktrees

### Create a new worktree with a new branch

```sh
git worktree add <path>/<branch>
```

### Create a new worktree and checkout it to existing branch

```sh
git worktree add <path> <branch>
```

### Remove worktree at path

```sh
git worktree remove <path>
```

### List your worktrees

```sh
git worktree list
```

## Tags

### Create a tag on last commit with name

```sh
git tag <name>
```

### Push a single tag to remote

```sh
git push origin <tag_name>
```

### Fetch Tags

```sh
git fetch --tags
```

## Branches

### Change current branch name

```sh
git branch -m <new_name>
```

### Change upstream branch

```sh
git branch <branch_name> -u <your_new_remote>/<branch_name>
```

The remote branch needs to be present on the remote, so if you changed the local branch name, first do `git push origin HEAD`.

### Remove all branches that are already merged to master.

> Note: also removes local master branch.

```sh
git branch --merged master | grep -v '^\*' | xargs -n 1 git branch -d
```

`grep -v '^\*'` - makes sure that currently checked out branch is not deleted. Is is even possible to remove currently checked out branch?

## Stash

### Stash only unstaged changes

```sh
git stash push --keep-index
```

## Resetting state

### Reset current branch to the remote state.

```sh
git fetch && git reset --hard @{u}
```
